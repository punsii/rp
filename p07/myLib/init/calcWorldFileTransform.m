calcWorldFile(...    
    [... 
        277.8519, 630.6903; ...
        988.5375, 651.3947; ...
        904.5473, 154.4890; ...
        335.0760, 182.9575; ...
        667.3445, 430.5477; ...
    ], ...
    [ ...
        42.347868, -71.092303; ...
        42.346953, -71.055913; ...
        42.366060, -71.060018; ...
        42.364804, -71.089441; ...
        42.355424, -71.072433; ...
    ], ...
    'resources/bostonNew.jgw' ...
)

function [returnCode] = calcWorldFile(picPoints, geoPoints, path)
    if length(size(picPoints)) ~= 2 ...
            | size(picPoints, 2) ~= 2 ...
            | size(picPoints, 1) < 3 ...
            | size(picPoints) ~= size(geoPoints)
        returnCode = -1;
        return
    end
    
    nPoints = size(picPoints, 1); 
    % we want to solve for a in Xa = t
    % where a is a vector with the 6 parameters for the affinetransform
    % in the order (a11, a21, a12, a22, b1, b1)
    t = zeros(nPoints * 2, 1);
    X = zeros(nPoints * 2, 6);
    for j = 1:nPoints
        %Fill Matricies X and t
        X(2 * j - 1, :) = [picPoints(j, 1), 0, picPoints(j, 2), 0, 1, 0];
        X(2 * j, :)     = [0, picPoints(j, 1), 0, picPoints(j, 2), 0, 1];
        t(2 * j - 1) = geoPoints(j, 1);
        t(2 * j)     = geoPoints(j, 2);
    end
    a = X\t; %shortcut for linsolve
    fid = fopen(path, 'w+');
    fprintf(fid, '%.12f\n', a);
    fclose(fid);
    disp('X');
    disp(X);
    disp('a');
    disp(a);
    disp('t');
    disp(t);
    return
end